---
title: "[Swift] nil の意味を明確にする方法"
emoji: "🕊"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Swift"]
published: true
---


# モチベーション

`nil` を乱暴に多用していると `nil` が表す意味が複数に膨れ上がってしまうため、何のために `nil` にしているかを変数から察することができないかと考えました。

# `nil` の意味を明確にする方法"

以下のように `Optional` を拡張すると、変数名から `nil` の意味を明確にすることができます。

```swift
extension Optional {
    static var nilForDefault: Wrapped? {
        nil
    }

    static var nilForError: Wrapped? {
        nil
    }
}

// 使い方
var num: Int? = .nilForDefault
var str: String? = .nilForError
```

# 使い方（応用）

`where Wrapped == 型名` で型を絞り込んで、`nil` を定義することもできます。

```swift
extension Optional where Wrapped == Int {
    static var nilForXXXXX: Wrapped? {
        nil
    }
}

var num: Int? = .nilForDefault // nil
var str: String? = .nilForXXXXX // Type 'String' has no member 'nilForXXXXX'
```

# そもそも

`nilForError` などを使うことは間違っていて、Error を throw するように実装していない証拠かもしれません。

以上です。